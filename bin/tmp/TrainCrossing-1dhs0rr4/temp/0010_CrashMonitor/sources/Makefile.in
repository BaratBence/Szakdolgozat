# Makefile generated by OpenModelica
CC=@CC@
AR=@AR@
CFLAGS=@CFLAGS@
LD=$(CC) -shared
LDFLAGS=@LDFLAGS@ @LIBS@
DLLEXT=@DLLEXT@
NEED_RUNTIME=@NEED_RUNTIME@
NEED_DGESV=@NEED_DGESV@
FMIPLATFORM=@FMIPLATFORM@
# Note: Simulation of the fmu with dymola does not work with -finline-small-functions (enabled by most optimization levels)
CPPFLAGS=@CPPFLAGS@

override CPPFLAGS += 

CFILES=TrainCrossing_CrashMonitor.c TrainCrossing_CrashMonitor_functions.c TrainCrossing_CrashMonitor_records.c TrainCrossing_CrashMonitor_01exo.c TrainCrossing_CrashMonitor_02nls.c TrainCrossing_CrashMonitor_03lsy.c TrainCrossing_CrashMonitor_04set.c TrainCrossing_CrashMonitor_05evt.c TrainCrossing_CrashMonitor_06inz.c TrainCrossing_CrashMonitor_07dly.c TrainCrossing_CrashMonitor_08bnd.c TrainCrossing_CrashMonitor_09alg.c TrainCrossing_CrashMonitor_10asr.c TrainCrossing_CrashMonitor_11mix.c TrainCrossing_CrashMonitor_12jac.c TrainCrossing_CrashMonitor_13opt.c TrainCrossing_CrashMonitor_14lnz.c TrainCrossing_CrashMonitor_15syn.c TrainCrossing_CrashMonitor_16dae.c TrainCrossing_CrashMonitor_17inl.c TrainCrossing_CrashMonitor_init_fmu.c TrainCrossing_CrashMonitor_FMU.c
OFILES=$(CFILES:.c=.o)

RUNTIMEDIR=.
ifneq ($(NEED_DGESV),)
DGESV_OBJS = 
endif
ifneq ($(NEED_RUNTIME),)
RUNTIMEFILES=./util/read_matlab4.o ./util/read_csv.o ./util/libcsv.o gc/memory_pool.o gc/omc_gc.o ./util/base_array.o ./util/boolean_array.o ./util/omc_error.o ./util/omc_file.o ./util/division.o ./util/generic_array.o ./util/index_spec.o ./util/integer_array.o ./util/list.o ./util/modelica_string.o ./util/real_array.o ./util/ringbuffer.o ./util/string_array.o ./util/utility.o ./util/varinfo.o ./util/ModelicaUtilities.o ./util/omc_msvc.o ./util/parallel_helper.o ./util/simulation_options.o ./util/rational.o ./util/modelica_string_lit.o ./util/omc_init.o ./util/omc_mmap.o ./util/jacobian_util.o ./math-support/pivot.o ./simulation/simulation_info_json.o ./simulation/options.o ./simulation/simulation_omc_assert.o ./simulation/omc_simulation_util.o ./simulation/solver/delay.o ./simulation/solver/fmi_events.o ./simulation/solver/omc_math.o ./simulation/solver/model_help.o ./simulation/solver/stateset.o ./simulation/solver/synchronous.o ./simulation/solver/initialization/initialization.o ./meta/meta_modelica_catch.o $(DGESV_OBJS)
endif

PHONY: TrainCrossing_CrashMonitor_FMU
TrainCrossing_CrashMonitor_FMU: nozip
	cd .. && rm -f ../TrainCrossing_CrashMonitor.fmu && zip -r ../TrainCrossing.CrashMonitor.fmu *
nozip: TrainCrossing_CrashMonitor_functions.h TrainCrossing_CrashMonitor_literals.h $(OFILES) $(RUNTIMEFILES)
	$(CXX) -shared -I. -o TrainCrossing_CrashMonitor$(DLLEXT) $(RUNTIMEFILES) $(OFILES) $(CPPFLAGS) -L"E:/Onlab/TrainCrossing"   $(CFLAGS) $(LDFLAGS) -llis -Wl,--kill-at
	mkdir.exe -p ../binaries/win64
	dlltool -d TrainCrossing_CrashMonitor.def --dllname TrainCrossing_CrashMonitor$(DLLEXT) --output-lib TrainCrossing_CrashMonitor.lib --kill-at
	cp TrainCrossing_CrashMonitor$(DLLEXT) TrainCrossing_CrashMonitor.lib TrainCrossing_CrashMonitor_FMU.libs ../binaries/win64/
	rm -f *.o TrainCrossing_CrashMonitor$(DLLEXT) $(OFILES) $(RUNTIMEFILES)
	cd .. && rm -f ../TrainCrossing_CrashMonitor.fmu && zip -r ../TrainCrossing.CrashMonitor.fmu *

